# Voter participation in 1844 election


Solution for voter participation exercise.

```{r}
voter_df <- read.csv('data/election_1844.csv')
participation <- voter_df$Participation
spread <- voter_df$Spread
```

```{r}
# Compute correlation.  It's -0.425.
actual_r <- cor(participation, spread)
actual_r
```

```{r}
n_trials <- 10000
results <- numeric(n_trials)

for (i in 1:n_trials) {
    # Shuffle the participation rates.
    shuffled <- sample(participation)
    # Compute re-sampled correlation.
    fake_r <- cor(shuffled, spread)
    # Keep the value in the results.
    results[i] <- fake_r
}

hist(results, breaks=25,
     main='Distribution of shuffled correlations',
     xlab='Correlation with shuffled participation')

# Count the trials when result <= observed.
k <- sum(results <= actual_r)
# Compute the proportion of such trials.
kk <- k / n_trials

message('Proportion of shuffled r <= observed: ', round(kk, 2))
```
