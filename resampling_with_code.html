<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.51">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Resampling statistics - 5&nbsp; Resampling with code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./resampling_with_code2.html" rel="next">
<link href="./about_technology.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">
  $(document).ready(function() {
    $("table").addClass('lightable-paper lightable-striped lightable-hover')
  });
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="font-awesome.min.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./resampling_with_code.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling with code</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Resampling statistics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface_third.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface to the third edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface_second.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface to the second edition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling_method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The resampling method</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./what_is_probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">What is probability?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./about_technology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introducing R and the Jupyter notebook</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling_with_code.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling with code</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resampling_with_code2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">More resampling with code</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampling_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tools for samples and sampling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_1a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Probability Theory, Part 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_1b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Probability Theory Part I (continued)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./more_sampling_tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Two puzzles and more tools</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_2_compound.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Probability Theory, Part 2: Compound Probability</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Probability Theory, Part 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_theory_4_finite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Probability Theory, Part 4: Estimating Probabilities from Finite Universes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sampling_variability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">On Variability in Sampling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./monte_carlo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Procedures of Monte Carlo Simulation (and Resampling)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./standard_scores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Ranks, Quantiles and Standard Scores</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference_ideas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">The Basic Ideas in Statistical Inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./inference_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Statistical Inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./point_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Point Estimation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./framing_questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Framing Statistical Questions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_counts_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Hypothesis-Testing with Counted Data, Part 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./significance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">The Concept of Statistical Significance in Testing Hypotheses</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_counts_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">The Statistics of Hypothesis-Testing with Counted Data, Part 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_measured.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">The Statistics of Hypothesis-Testing With Measured Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing_procedures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">General Procedures for Testing Hypotheses</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confidence_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Confidence Intervals, Part 1: Assessing the Accuracy of Samples</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./confidence_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Confidence Intervals, Part 2: The Two Approaches to Estimating Confidence Intervals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reliability_average.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Some Last Words About the Reliability of Sample Averages</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlation_causation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Correlation and Causation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_big_sample.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">How Large a Sample?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayes_simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Bayesian Analysis by Simulation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercise_solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Exercise Solutions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./acknowlegements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Acknowledgements</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./technical_note.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Technical Note to the Professional Reader</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#statistics-and-probability" id="toc-statistics-and-probability" class="nav-link active" data-scroll-target="#statistics-and-probability"><span class="header-section-number">5.1</span> Statistics and probability</a></li>
  <li><a href="#a-new-treatment-for-burkitt-lymphoma" id="toc-a-new-treatment-for-burkitt-lymphoma" class="nav-link" data-scroll-target="#a-new-treatment-for-burkitt-lymphoma"><span class="header-section-number">5.2</span> A new treatment for Burkitt lymphoma</a></li>
  <li><a href="#a-physical-model-of-the-hypothetical-hospital" id="toc-a-physical-model-of-the-hypothetical-hospital" class="nav-link" data-scroll-target="#a-physical-model-of-the-hypothetical-hospital"><span class="header-section-number">5.3</span> A physical model of the hypothetical hospital</a></li>
  <li><a href="#a-trial-a-run-a-count-and-a-proportion" id="toc-a-trial-a-run-a-count-and-a-proportion" class="nav-link" data-scroll-target="#a-trial-a-run-a-count-and-a-proportion"><span class="header-section-number">5.4</span> A trial, a run, a count and a proportion</a></li>
  <li><a href="#simulate-one-trial-with-code" id="toc-simulate-one-trial-with-code" class="nav-link" data-scroll-target="#simulate-one-trial-with-code"><span class="header-section-number">5.5</span> Simulate one trial with code</a></li>
  <li><a href="#from-numbers-to-s" id="toc-from-numbers-to-s" class="nav-link" data-scroll-target="#from-numbers-to-s"><span class="header-section-number">5.6</span> From numbers to vectors</a></li>
  <li><a href="#sec-introducing-functions" id="toc-sec-introducing-functions" class="nav-link" data-scroll-target="#sec-introducing-functions"><span class="header-section-number">5.7</span> Functions</a></li>
  <li><a href="#sec-named-arguments" id="toc-sec-named-arguments" class="nav-link" data-scroll-target="#sec-named-arguments"><span class="header-section-number">5.8</span> Functions and named arguments</a></li>
  <li><a href="#sec-ranges" id="toc-sec-ranges" class="nav-link" data-scroll-target="#sec-ranges"><span class="header-section-number">5.9</span> Ranges</a></li>
  <li><a href="#sec-random-choice" id="toc-sec-random-choice" class="nav-link" data-scroll-target="#sec-random-choice"><span class="header-section-number">5.10</span> Choosing values at random</a></li>
  <li><a href="#sec-sampling-arrays" id="toc-sec-sampling-arrays" class="nav-link" data-scroll-target="#sec-sampling-arrays"><span class="header-section-number">5.11</span> Sampling into vectors</a>
  <ul class="collapse">
  <li><a href="#sum-adding-all-the-values" id="toc-sum-adding-all-the-values" class="nav-link" data-scroll-target="#sum-adding-all-the-values"><span class="header-section-number">5.11.1</span> <code>sum</code> — adding all the values</a></li>
  </ul></li>
  <li><a href="#counting-results" id="toc-counting-results" class="nav-link" data-scroll-target="#counting-results"><span class="header-section-number">5.12</span> Counting results</a>
  <ul class="collapse">
  <li><a href="#comparison" id="toc-comparison" class="nav-link" data-scroll-target="#comparison"><span class="header-section-number">5.12.1</span> Comparison</a></li>
  </ul></li>
  <li><a href="#sec-count-with-sum" id="toc-sec-count-with-sum" class="nav-link" data-scroll-target="#sec-count-with-sum"><span class="header-section-number">5.13</span> Counting <code>TRUE</code> values with <code>sum</code></a></li>
  <li><a href="#the-procedure-for-one-simulated-trial" id="toc-the-procedure-for-one-simulated-trial" class="nav-link" data-scroll-target="#the-procedure-for-one-simulated-trial"><span class="header-section-number">5.14</span> The procedure for one simulated trial</a></li>
  <li><a href="#repeating-the-trial" id="toc-repeating-the-trial" class="nav-link" data-scroll-target="#repeating-the-trial"><span class="header-section-number">5.15</span> Repeating the trial</a></li>
  <li><a href="#what-have-we-learned-from-saint-hypothetical" id="toc-what-have-we-learned-from-saint-hypothetical" class="nav-link" data-scroll-target="#what-have-we-learned-from-saint-hypothetical"><span class="header-section-number">5.18</span> What have we learned from Saint Hypothetical?</a></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions"><span class="header-section-number">5.19</span> Conclusions</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-resampling-code" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling with code</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><a href="resampling_method.html" class="quarto-xref"><span>Chapter&nbsp;2</span></a> used simulation and resampling from tables of random numbers, dice, and coins. Making random choices in this way can make it easier to understand the process, but of course, physical methods of making random outcomes can be slow and boring.</p>
<p>We saw that short computer programs can do a huge number of resampling trials in a less than a second. The flexibility of a programming language makes it possible to simulate many different outcomes and tests.</p>
<p>Programs can build up tables of random numbers, and do basic tasks like counting the number of values in a row or taking proportions. With these simple tools, we can simulate many problems in probability and statistics.</p>
<p>In this chapter, we will model another problem using R, but this chapter will add three new things.</p>
<ul>
<li><p>The problem we will work on is a little different from the ambulances problem from <a href="resampling_method.html" class="quarto-xref"><span>Chapter&nbsp;2</span></a>. It is a real problem about deciding whether a new cancer treatment is better than the alternatives, and it introduces the idea of making a model of the world, to ask questions about chances and probabilities.</p></li>
<li><p>We will slow down a little to emphasize the steps in solving this kind of problem. First we work out how to simulate a single <em>trial</em>. Then we work out how to run many simulated trials.</p></li>
<li><p>We sprinted through the code in <a href="resampling_method.html" class="quarto-xref"><span>Chapter&nbsp;2</span></a>, with the promise we would come back to the details. Here we go into more detail about some ideas from the code in the last chapter. These are:</p>
<ul>
<li>Storing several values together in one place, with <span class="r">vectors</span>.</li>
<li>Using <em>functions</em> (code recipes) to apply procedures.</li>
<li><em>Comparing</em> numbers to other numbers.</li>
<li><em>Counting</em> numbers that match a condition.</li>
</ul></li>
</ul>
<p>In the next chapter, we will talk more about <em>using vectors</em> to store results, and <em>for loops</em> to repeat a procedure many times.</p>
<section id="statistics-and-probability" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="statistics-and-probability"><span class="header-section-number">5.1</span> Statistics and probability</h2>
<p>We have already emphasized that <em>statistics</em> is a way of drawing conclusions about data from the real world, in the presence of random variation; <em>probability</em> is the way of reasoning about random variation. This chapter introduces our first <em>statistical</em> problem, where we use probability to draw conclusions about some important data — about a potential cure for a type of cancer. We will not make much of the distinction between probability and statistics here, but we will come back to it several times in later chapters.</p>
</section>
<section id="a-new-treatment-for-burkitt-lymphoma" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="a-new-treatment-for-burkitt-lymphoma"><span class="header-section-number">5.2</span> A new treatment for Burkitt lymphoma</h2>
<p><a href="https://en.wikipedia.org/wiki/Burkitt_lymphoma">Burkitt lymphoma</a> is an unusual cancer of the lymphatic system. The lymphatic system is a vein-like network throughout the body that is involved in the immune reaction to disease. In developed countries, with standard treatment, the cure rate for Burkitt lymphoma is about 90%.</p>
<p>In 2006, researchers at the US National Cancer Institute (NCI), tested a new treatment for Burkitt lymphoma <span class="citation" data-cites="dunleavy2006burkitt">(<a href="references.html#ref-dunleavy2006burkitt" role="doc-biblioref">Dunleavy et al. 2006</a>)</span>. They gave the new treatment to 17 patients, and found that all 17 patients were doing well after two years or more of follow up. By “doing well”, we mean that their lymphoma had not progressed; as a short-hand, we will say that these patients were “cured”, but of course, we do not know what happened to them after this follow up.</p>
<p>Here is where we put on our statistical hat and ask ourselves the following question — <em>how surprised are we that the NCI researchers saw their result of 17 out of 17 patients cured?</em></p>
<p>At this stage you might and should ask, what could we possibly mean by “surprised”? That is a good and important question, and we will discuss that much more in the chapters to come. For now, please bear with us as we do a thought experiment.</p>
<p>Let us forget the 17 out of 17 result of the NCI study for a moment. Imagine that there is another hospital, called Saint Hypothetical General, just down the road from the NCI, that was also treating 17 patients with Burkitt lymphoma. Saint Hypothetical were not using the NCI treatment, they were using the standard treatment.</p>
<p>We already know that each patient given the standard treatment has a 90% chance of cure. Given that 90% cure rate, what is the chance that 17 out of 17 of the Hypothetical group will be cured?</p>
<p>You may notice that this question about the Hypothetical group is similar to the problem of the 20 ambulances in Chapter <a href="resampling_method.html" class="quarto-xref"><span>Chapter&nbsp;2</span></a>. In that problem, we were interested to know how likely it was that 3 or more of 20 ambulances would be out of action on any one day, given that each ambulance had a 10% chance of being out of action. Here we would like to know the chances that all 17 patients would be cured, given that each patient has a 90% chance of being cured.</p>
</section>
<section id="a-physical-model-of-the-hypothetical-hospital" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="a-physical-model-of-the-hypothetical-hospital"><span class="header-section-number">5.3</span> A physical model of the hypothetical hospital</h2>
<p>As in the ambulance example, we could make a physical model of chance in this world. For example, to simulate whether a given patient is cured or not by a 90% effective treatment, we could throw a ten sided die and record the result. We could say, arbitrarily, that a result of 0 means “not cured”, and all the numbers 1 through 9 mean “cured” (typical 10-sided dice have sides numbered 0 through 9).</p>
<p>We could roll 17 dice to simulate one “trial” in this random world. For each trial, we record the number of dice that show numbers 1 through 9 (and not 0). This will be a number between 0 and 17, and it is the number of patients “cured” in our simulated trial.</p>
<p><a href="#fig-17-d10s" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> is the result of one such trial we did with a set of 17 10-sided dice we happened to have to hand:</p>
<div id="fig-17-d10s" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/17_d10s.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;5.1: One roll of 17 10-sided dice</figcaption>
</figure>
</div>
<p>The trial in <a href="#fig-17-d10s" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> shows are four dice with the 0 face uppermost, and the rest with numbers from 1 through 9. Therefore, there were 13 out of 17 not-zero numbers, meaning that 13 out of 17 simulated “patients” were “cured” in this simulated trial.</p>
<!---
Check we have adapted text above to picture.
-->
<p>We could repeat this simulated trial procedure 100 times, and we would then have 100 counts of the not-zero numbers. Each of the 100 counts would be the number of patients cured in that trial. We can ask how many of these 100 counts were equal to 17. This will give us an estimate of the probability we would see 17 out of 17 patients cured, given that any one patient has a 90% chance of cure. For example, say we saw 15 out of 100 counts were equal to 17. That would give us an estimate of 15 / 100 or 0.15 or 15%, for the probability we would see 17 out of 17 patients cured.</p>
<p>So, if Saint Hypothetical General did see 17 out of 17 patients cured with the standard treatment, they would be a little surprised, because they would only expect to see that happen 15% of the time. But they would not be <em>very</em> surprised — 15% of the time is uncommon, but not <em>very</em> uncommon.</p>
</section>
<section id="a-trial-a-run-a-count-and-a-proportion" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="a-trial-a-run-a-count-and-a-proportion"><span class="header-section-number">5.4</span> A trial, a run, a count and a proportion</h2>
<p>Here we stop to emphasize the steps in the process of a random simulation.</p>
<ol type="1">
<li><em>We decide what we mean by one trial</em>. Here one trial has the same meaning in medicine as resampling — we mean the result of treating 17 patients. One <em>simulated trial</em> is then the simulation of one set of outcomes from 17 patients.</li>
<li>Work out the <em>outcome</em> of interest from the trial. The outcome here is the number of patients cured.</li>
<li>We work out a way to <em>simulate one trial</em>. Here we chose to throw 17 10-sided dice, and count the number of not zero values. This is the outcome from one simulation trial.</li>
<li>We <em>repeat</em> the simulated trial procedure many times, and collect the results from each trial. Say we repeat the trial procedure 100 times; we will call this a <em>run</em> of 100 trials.</li>
<li>We <em>count</em> the number of trials with an outcome that matches the outcome we are interested in. In this case we are interested in the outcome 17 out of 17 cured, so we count the number of trials with a score of 17. Say 15 out of the run of 100 trials had an outcome of 17 cured. That is our <em>count</em>.</li>
<li>Finally we divide the count by the number of trials to get the <em>proportion</em>. From the example above, we divide 15 by 100 to 0.15 (15%). This is our estimate of the chance of seeing 17 out of 17 patients cured in any one trial. We can also call this an estimate of the <em>probability</em> that 17 out of 17 patients will be cured on any on trial.</li>
</ol>
<p>Our next step is to work out the code for step 2: <em>simulate one trial</em>.</p>
</section>
<section id="simulate-one-trial-with-code" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="simulate-one-trial-with-code"><span class="header-section-number">5.5</span> Simulate one trial with code</h2>
<p>We can use the computer to do something very similar to rolling 17 10-sided dice, by asking the computer for 17 random whole numbers from 0 through 9.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Whole numbers
</div>
</div>
<div class="callout-body-container callout-body">
<p>A whole number is a number that is not negative, and does not have fractional part (does not have anything after a decimal point). 0 and 1 and 2 and 3 are whole numbers, but -1 and <span class="math inline">\(\frac{3}{5}\)</span> and 11.3 are not. The whole numbers from 0 through 9 are 0, 1, 2, 3, 4, 5, 6, 7, 8, 9.</p>
</div>
</div>
<p>We have already discussed what we mean by <em>random</em> in <a href="resampling_method.html#sec-randomness-computer" class="quarto-xref"><span>Section&nbsp;2.2</span></a>.</p>
</section>
<section id="from-numbers-to-s" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="from-numbers-to-s"><span class="header-section-number">5.6</span> From numbers to vectors</h2>
<p>We need to prepare the <em>sequence</em> of numbers that we want R to select from.</p>
<p>We have already seen the idea that R has <em>values</em> that are individual numbers. Remember, a <em>variable</em> is a <em>named value</em>. Here we attach the name <code>a</code> to the value 1.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-3_34c886e4902ea81ba2b3cb2dfc60e1c7">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the value of "a"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>R also allows <em>values</em> that are <em>sequences of numbers</em>. R calls these sequences <em>vectors</em>.</p>
<div class="r">
<p>The name <em>vector</em> sounds rather technical and mathematical, but the only important idea for us is that a <em>vector</em> stores a <em>sequence</em> of numbers.</p>
</div>
<p>Here we make a vector that contains the 10 numbers we will select from:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-5_c7b9250fd3117fce55d06bc5ac04df4c">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a vector of numbers, store with the name "some_numbers".</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>some_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the value of "some_numbers"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>some_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<p>Notice that the value for <code>some_numbers</code> is a vector, and that this value <em>contains</em> 10 numbers.</p>
<p>Put another way, <code>some_numbers</code> is now the name we can use for this collection of 10 values.</p>
<p><span class="r">Vectors</span> are very useful for simulations and data analysis, and we will be using these for nearly every example in this book.</p>
</section>
<section id="sec-introducing-functions" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="sec-introducing-functions"><span class="header-section-number">5.7</span> Functions</h2>
<p><em>Functions</em> are another tool that we will be using everywhere, and that you seen already, although we have not introduced them until now.</p>
<p>You can think of functions as named <em>production lines</em>.</p>
<p>For example, consider the R <em>function</em> <span class="r"><code>round</code></span></p>
<p><span class="r"><code>round</code></span> is the name for a simple production line, that takes in a number, and (by default) sends back the number rounded to the nearest <em>integer</em>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What is an integer?
</div>
</div>
<div class="callout-body-container callout-body">
<p>An <em>integer</em> is a positive or negative <em>whole number</em>.</p>
<p>In other words, a number is an <em>integer</em> if the number is <em>either</em> a whole number (0, 1, 2 …), <em>or</em> a negative whole number (-1, -2, -3 …). All of -208, -2, 0, 10, 105 are integers, but <span class="math inline">\(\frac{3}{5}\)</span>, -10.3 and 0.2 are not.</p>
<p>We will use the term <em>integer</em> fairly often, because it is a convenient way to name all the positive and negative whole numbers.</p>
</div>
</div>
<p>Think of a function as a named <em>production line</em>. We sent the function (production line) raw material (components) to work on. The production line does some work on the components. A finished result comes off the other end.</p>
<p>Therefore, think of <span class="r"><code>round</code></span> as the name of a production line, that takes in a <em>component</em> (in this case, any number), and does some work, and sends back the finished <em>result</em> (in this case, the number rounded to the nearest integer.</p>
<p>The components we send to a function are called <em>arguments</em>. The finished result the function sends back is the <em>return value</em>.</p>
<ul>
<li><strong>Arguments</strong> : the value or values we send to a function.</li>
<li><strong>Return value</strong> : the values the function sends back.</li>
</ul>
<p>See <a href="#fig-round_function_pl" class="quarto-xref">Figure&nbsp;<span>5.2</span></a> for an illustration of <span class="r"><code>round</code></span> as a production line.</p>
<div class="cell" data-layout-align="center" data-opts.label="svg_fig" data-hash="resampling_with_code_cache/html/fig-round_function_pl_09067fe348eec04660b0599986d6ffd5">
<div class="cell-output-display">
<div id="fig-round_function_pl" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="diagrams/round_function_pl.svg" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5.2: The <code>round</code> function as a production line</figcaption>
</figure>
</div>
</div>
</div>
<p>In the next few code chunks, you see examples where <span class="r"><code>round</code></span> takes in a not-integer number, as an <em>argument</em>, and sends back the nearest integer as the <em>return value</em>:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-9_190670007cfe329b7e95ccb29fa1826e">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put in 3.2, round sends back 3.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-10_2d1ab10cebae8a2b1981c64b8e9e6404">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put in -2.7, round sends back -3.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="sc">-</span><span class="fl">2.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -3</code></pre>
</div>
</div>
<p>Like many functions, <span class="r"><code>round</code></span> can take more than one argument (component). You can send <code>range</code> the number of digits you want to round to, after the number of you want it to work on, like this (see <a href="#fig-round_ndigits_pl" class="quarto-xref">Figure&nbsp;<span>5.3</span></a>):</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-12_7b6df775317d26aa1abe29ae2131e13d">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put in 3.1415, and the number of digits to round to (2).</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># round sends back 3.14</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.1415</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.14</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-opts.label="svg_fig" data-hash="resampling_with_code_cache/html/fig-round_ndigits_pl_33ea33af7338fdf53ed797dd467bf660">
<div class="cell-output-display">
<div id="fig-round_ndigits_pl" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="diagrams/round_function_ndigits_pl.svg" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5.3: <code>round</code> with optional arguments specifying number of digits</figcaption>
</figure>
</div>
</div>
</div>
<p>Notice that the second argument — here 2 — is <em>optional</em>. We only have to send <code>round</code> one argument: the number we want it to round. But we can <em>optionally</em> send it a second argument — the number of decimal places we want it to round to. If we don’t specify the second argument, then <code>round</code> assumes we want to round to 0 decimal places, and therefore, to the nearest integer.</p>
</section>
<section id="sec-named-arguments" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="sec-named-arguments"><span class="header-section-number">5.8</span> Functions and named arguments</h2>
<p>In the example above, we sent <code>round</code> two arguments. <code>round</code> knows that we mean the first argument to be the number we want to round, and the second argument is the number of decimal places we want to round to. It knows which is which by the <em>position</em> of the arguments — the <em>first</em> argument is the <em>number</em> it should round, and <em>second</em> is the number of digits.</p>
<p>In fact, internally, the <code>round</code> function also gives these arguments <em>names</em>. It calls the number it should round — <span class="r"><code>x</code></span> — and the number of digits it should round to — <span class="r"><code>digits</code></span>. This is useful, because it is often clearer and simpler to identify the argument we are specifying with its name, instead of just relying on its position.</p>
<p>If we aren’t using the argument names, we call the round function as we did above:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-14_140ed37de8ffa4f1c5f85225ca7c5fe0">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put in 3.1415, and the number of digits to round to (2).</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># round sends back 3.14</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.1415</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.14</code></pre>
</div>
</div>
<p>In this call, we relied on the fact that we, the people writing the code, and you, the person reading the code, remembers that the second argument (2) means the number of decimal places it should round to. But, we can also specify the argument using its name, like this (see <span class="r"><a href="#fig-round_function_named" class="quarto-xref">Figure&nbsp;<span>5.4</span></a></span>):</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-16_7a943efe40464a8707c947e091b66f9e">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put in 3.1415, and the number of digits to round to (2).</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the name of the number-of-decimals argument for clarity:</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.1415</span>, <span class="at">digits=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.14</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-opts.label="svg_fig" data-hash="resampling_with_code_cache/html/fig-round_function_named_ec8b106f735075c77f43cb694a404458">
<div class="cell-output-display">
<div id="fig-round_function_named" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="diagrams/round_function_named.svg" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5.4: The <code>round</code> function with argument names</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center" data-opts.label="svg_fig" data-hash="resampling_with_code_cache/html/fig-np_round_function_named_bed89b0f57e079c56705f801246aa645">
<div class="cell-output-display">
<div id="fig-np_round_function_named" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="diagrams/np_round_function_named.svg" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5.5: The <code>np.round</code> function with argument names</figcaption>
</figure>
</div>
</div>
</div>
<p>Here R sees the <em>first</em> argument, as before, and assumes that it is the number we want to round. Then it sees the second, named argument — <span class="r"><code>digits=2</code></span> — and knows, <em>from the name</em>, that we mean this to be the number of decimals to round to.</p>
<p>In fact, we could even specify <em>both</em> arguments by name, like this:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-18_ef7f77fb8b0fcaf93a0c61a479b26144">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put in 3.1415, and the number of digits to round to (2).</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Name both arguments.</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="at">x=</span><span class="fl">3.1415</span>, <span class="at">digits=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.14</code></pre>
</div>
</div>
<p>We don’t usually name both arguments for <code>round</code>, as we have above, because it is so obvious that the first argument is the thing we want to round, and so naming the argument does not make it any more clear what the code is doing. But — as so often in programming — whether to use the names, or let R work out which argument is which by position, is a judgment call. The judgment you are making is about the way to write the code to be most clear for your reader, where your most important reader may be you, coming back to the code in a week or a year.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How do you know what names to use for the function arguments?
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can find the names of the function arguments in the help for the function, either online, or in the notebook interface. For example, to get the help for <span class="r"><code>round</code></span>, including the argument names, you could make a new chunk, and type <span class="r"><code>?round</code></span>, then execute the cell <span class="r">by running the chunk</span>. This will show the help for the function in the notebook interface.</p>
</div>
</div>
</section>
<section id="sec-ranges" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="sec-ranges"><span class="header-section-number">5.9</span> Ranges</h2>
<p>Now let us return to the variable <code>some_numbers</code> that we created above:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-20_021a938cf2fbefdc4b874a491ade27a3">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a vector of numbers, store with the name "some_numbers".</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>some_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the value of "some_numbers"</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>some_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<p>In fact, we often need to do this: generate a sequence or <em>range</em> of integers, such as 0 through 9.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pick a number from 1 through 5
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ranges can be confusing in normal speech because it is not always clear whether they include their beginning and end. For example, if someone says “pick a number between 1 and 5”, do they mean <em>all</em> the numbers, including the first and last (any of 1 or 2 or 3 or 4 or 5)? Or do they mean only the numbers that are <em>between</em> 1 and 5 (so 2 or 3 or 4)? Or do they mean all the numbers up to, but not including 5 (so 1 or 2 or 3 or 4)?</p>
<p>To avoid this confusion, we will nearly always use “from” and “through” in ranges, meaning that we do include both the start and the end number. For example, if we say “pick a number from 1 through 5” we mean one of 1 or 2 or 3 or 4 or 5.</p>
</div>
</div>
<p>Creating ranges of numbers is so common that R has a <span class="r">special syntax</span> to do that.</p>
<div class="r">
<p>R allows you to write a colon (<code>:</code>) between two values, to mean that you want a <em>vector</em> (sequence) that is all the integers from the first value (before the colon) <em>through</em> the second value (after the colon):</p>
</div>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-25_7a6e041ab22ce460ad9bed25d0003c9c">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A vector containing all the integers from 0 through 9.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>some_integers <span class="ot">=</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>some_integers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<p>Here are some more examples of <span class="r">the colon syntax</span>:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-28_0afb2a75fedf0473bba295428d41c9e2">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All the integers from 10 through 14</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="sc">:</span><span class="dv">14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 11 12 13 14</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-29_abfaa9837cc957e1b7abd3e2d408363a">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All the integers from -1 through 5</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1  0  1  2  3  4  5</code></pre>
</div>
</div>
</section>
<section id="sec-random-choice" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="sec-random-choice"><span class="header-section-number">5.10</span> Choosing values at random</h2>
<p>We can use the <span class="r"><code>sample</code></span> function to select a single value <em>at random</em> from the sequence of numbers in <code>some_integers</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
More on <code>sample</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>sample</code> function will be a fundamental tool for taking many kinds of samples, and we cover it in more detail in <a href="sampling_tools.html" class="quarto-xref"><span>Chapter&nbsp;7</span></a>.</p>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-38_aafb38038663f2c43b50d63a35e6d0e4">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select 1 integer (the second argument) from the choices in some_integers</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (the first argument).</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>my_integer <span class="ot">&lt;-</span> <span class="fu">sample</span>(some_integers, <span class="dv">1</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the value that results.</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>my_integer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<p>Like <span class="r"><code>round</code></span> (above), <span class="r"><code>sample</code></span> is a <em>function</em>.</p>
<p>As you remember, a function is a named <em>production line</em>. In our case, the production line has the name <span class="r">the <code>sample</code> function</span>.</p>
<p>We sent <span class="r">the <code>sample</code> function</span>. a value to work on — an <em>argument</em>. In this case, the argument was the value of <code>some_integers</code>.</p>
<div class="r">
<p><code>sample</code> also needs the number of random values we should select from the first argument. We can send the number of values we want with the <em>second argument</em>.</p>
</div>
<p><span class="r"><a href="#fig-sample_pl" class="quarto-xref">Figure&nbsp;<span>5.6</span></a></span> is a diagram illustrating an example run of the <code>sample</code> function (production line).</p>
<div class="r">
<div class="cell" data-layout-align="center" data-opts.label="svg_fig" data-hash="resampling_with_code_cache/html/fig-sample_pl_88b19810e3b70a2f186d632a61a6c273">
<div class="cell-output-display">
<div id="fig-sample_pl" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="diagrams/sample_pl.svg" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption class="figure-caption">Figure&nbsp;5.6: Example run of the <code>sample</code> function</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>Here is the same code again, with new comments.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-40_25c9f083a37ebe8faef15e8b0fc484a9">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Send the value of "some_integers" to sample.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># some_integers is the *argument*.  Ask sample to return 1 of the values.</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Put the *return* value from the function into "my_number".</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>my_number <span class="ot">&lt;-</span> <span class="fu">sample</span>(some_integers, <span class="dv">1</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the value that results.</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>my_number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</section>
<section id="sec-sampling-arrays" class="level2" data-number="5.11">
<h2 data-number="5.11" class="anchored" data-anchor-id="sec-sampling-arrays"><span class="header-section-number">5.11</span> Sampling into vectors</h2>
<div class="r">
<p>In the code above, we asked R to select a single number at random — by sending 1 as the second argument to the function.</p>
<p>As you can imagine, we can tell <code>sample</code> to select <em>any number of values</em> at random, by changing the second argument to the function.</p>
<p>In our case, we would like R to select 17 numbers at random from the sequence of <code>some_integers</code>.</p>
<p>But — there is a complication here. By default, <code>sample</code> selects numbers from the first argument <em>without replacement</em>, meaning that, by default, sample cannot select the same number twice, and in our case, where we want 17 numbers, that is bad, because <code>sample</code> is going to run out of numbers. To get the result we want, we must also add an extra argument: <code>replace=TRUE</code>. <code>replace=TRUE</code> tells R to sample <code>some_integers</code> <em>with replacement</em>, where <code>sample</code> can select the same number more than once in the same sample. Sampling with and without replacement is a fundamental distinction in probability and statistics. <a href="sampling_tools.html" class="quarto-xref"><span>Chapter&nbsp;7</span></a> goes into much more detail about this, but for now, please take our word for it that using <code>replace=TRUE</code> for <code>sample</code> gives us the same effect as rolling several 10-sided dice.</p>
</div>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-42_44923745add7db097cab67c60fbed265">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 17 values from the *some_integers* vector.</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample *with replacement*, so sample can select numbers more than once.</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Store the 17 numbers with the name "a"</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sample</span>(some_integers, <span class="dv">17</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result.</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 5 3 5 8 4 4 7 1 6 4 4 1 5 3 1 2 8</code></pre>
</div>
</div>
<p>As you can see, the function sent back (returned) 17 numbers. Because it is sending back more than one number, the thing it sends back is a vector, where the vector has 17 elements.</p>
<section id="sum-adding-all-the-values" class="level3" data-number="5.11.1">
<h3 data-number="5.11.1" class="anchored" data-anchor-id="sum-adding-all-the-values"><span class="header-section-number">5.11.1</span> <code>sum</code> — adding all the values</h3>
<p>Bear with us for a short diversion. You will see why we made this diversion soon.</p>
<p>R has a function <span class="r"><code>sum</code></span> that will add up all the numbers in a vector.</p>
<p>You can see the contents of <code>a</code> above.</p>
<p><span class="r"><code>sum</code></span> adds all the numbers in the vector together, to give the <em>sum</em> of the vector. The <em>sum</em> is just the result of adding the second element to the first, then adding third element to the result, and the fourth element to the result, and so on.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-44_b7ce53a133eb60229d3f57f30973d36d">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 71</code></pre>
</div>
</div>
</section>
</section>
<section id="counting-results" class="level2" data-number="5.12">
<h2 data-number="5.12" class="anchored" data-anchor-id="counting-results"><span class="header-section-number">5.12</span> Counting results</h2>
<p>We now have the code to do the equivalent of throwing 17 ten-sided dice. This is the basis for one simulated trial in the world of Saint Hypothetical General.</p>
<p>Our next job is to get the code to count the number of numbers that are not zero in the vector <code>a</code>. That will give us the number of patients who were cured in simulated trial.</p>
<p>Another way of asking this question, is to ask how many elements in <code>a</code> are greater than zero.</p>
<section id="comparison" class="level3" data-number="5.12.1">
<h3 data-number="5.12.1" class="anchored" data-anchor-id="comparison"><span class="header-section-number">5.12.1</span> Comparison</h3>
<p>To ask whether a number is greater than zero, we use <em>comparison</em>. Here is a <em>greater than zero</em> comparison on a single number:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-46_36c209c3257faf60c17c6ab92f8946f1">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of n greater than 0?</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of the comparison.</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>n <span class="sc">&gt;</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><code>&gt;</code> is a <em>comparison</em> — it <em>asks a question</em> about the numbers either side of it. In this case <code>&gt;</code> is asking the question “is the value of <code>n</code> (on the left hand side) greater than 0 (on the right hand side)?” The value of <code>n</code> is 5, so the question becomes, “is 5 greater than 0?” The answer is Yes, and R represents this Yes answer as the value <code>TRUE</code>.</p>
<p>In contrast, the comparison below boils down to “is 0 greater than 0?”, to which the answer is No, and R represents this as <code>FALSE</code>.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-48_a0f96b7add311d59983245a9f839fd0a">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of p greater than 0?</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of the comparison.</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>p <span class="sc">&gt;</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>So far you have seen the results of comparison on a single number. Now say we do the same comparison on a vector. For example, say we ask the question “is the value of <code>a</code> greater than 0”? Remember, <code>a</code> is a vector containing 17 values. We are comparing 17 values to one value (0). What answer do you think R will give? You may want to think a little about this before you read on.</p>
<p>As a reminder, here is the current value for <code>a</code>:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-50_8edc8f3c1a8c5980713124b6d1328392">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the current value for "a"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 5 3 5 8 4 4 7 1 6 4 4 1 5 3 1 2 8</code></pre>
</div>
</div>
<p>Now you have had some time to think, here is what happens:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-52_28b4f4ffe1cf9fb496240d34b59574be">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of "a" greater than 0?</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of the comparison.</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>a <span class="sc">&gt;</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE</code></pre>
</div>
</div>
<p>There are 17 values in <code>a</code>, so the comparison to 0 means there are 17 comparisons, and 17 answers. R therefore returns <em>a vector</em> of 17 elements, containing these 17 answers. The first answer is the answer to the question “is the value of the <em>first</em> element of <code>a</code> greater than 0”, and the second is the answer to “is the value of the <em>second</em> element of <code>a</code> greater than 0”.</p>
<p>Let us store the result of this comparison to work on:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-54_e9e450159e42ff6faf89f88e1e70096a">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of "a" greater than 0?</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Store as another vector "q".</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> a <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the value of q</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>q</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE
[16] TRUE TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-count-with-sum" class="level2" data-number="5.13">
<h2 data-number="5.13" class="anchored" data-anchor-id="sec-count-with-sum"><span class="header-section-number">5.13</span> Counting <code>TRUE</code> values with <code>sum</code></h2>
<p>Notice above that there is one <code>TRUE</code> element in <code>q</code> for every element in <code>a</code> that was greater than 0. It only remains to <em>count</em> the number of <code>TRUE</code> values in <code>q</code>, to get the count of patients in our simulated trial who were cured.</p>
<p>We can use the R function <span class="r"><code>sum</code></span> to count the number of <code>TRUE</code> elements in a vector. As you can see above, <span class="r"><code>sum</code></span> adds up all the elements in a vector, to give a single number. This will work as we want for the <code>q</code> vector, because R counts <code>FALSE</code> as equal to 0 and <code>TRUE</code> as equal to 1:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-57_814851f2cb1f22e0bfaa915024814598">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Question: is FALSE equal to 0?</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer - Yes! (TRUE)</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">==</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-58_f5031b0e73d1fdcbbc968205211aa1f3">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Question: is TRUE equal to 1?</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer - Yes! (TRUE)</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Therefore, the function <code>sum</code>, when applied to a vector of <code>TRUE</code> and <code>FALSE</code> values, will count the number of <code>TRUE</code> values in the vector.</p>
<p>To see this in action we can make a new vector of <code>TRUE</code> and <code>FALSE</code> values, and try using <span class="r"><code>sum</code></span> on the new array.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-60_0cb6dc42e30fe21bb97824ee657c5f3b">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A vector containing three TRUE values and two FALSE values.</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>trues_and_falses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the new vector.</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>trues_and_falses</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<p>The <code>sum</code> operation adds all the elements in the vector. Because <code>TRUE</code> counts as 1, and <code>FALSE</code> counts as 0, adding all the elements in <code>trues_and_falses</code> is the same as adding up the values 1 + 0 + 1 + 1 + 0, to give 3.</p>
<p>We can apply the same operation on <code>q</code> to count the number of <code>TRUE</code> values.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-62_c6ab235a23dc837a79b2812a0902563e">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of TRUE values in "q"</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This is the same as the number of values in "a" that are greater than 0.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">sum</span>(q)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17</code></pre>
</div>
</div>
</section>
<section id="the-procedure-for-one-simulated-trial" class="level2" data-number="5.14">
<h2 data-number="5.14" class="anchored" data-anchor-id="the-procedure-for-one-simulated-trial"><span class="header-section-number">5.14</span> The procedure for one simulated trial</h2>
<p>We now have the whole procedure for one simulated trial. We can put the whole procedure in one chunk:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-64_8feb832e02d52d872a2e40cd59b4553f">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Procedure for one simulated trial</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 17 values from the *some_integers* vector.</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Store the 17 numbers with the name "a"</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sample</span>(some_integers, <span class="dv">17</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of "a" greater than 0?</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> a <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of TRUE values in "q"</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">sum</span>(q)</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of this simulated trial.</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
</div>
</section>
<section id="repeating-the-trial" class="level2" data-number="5.15">
<h2 data-number="5.15" class="anchored" data-anchor-id="repeating-the-trial"><span class="header-section-number">5.15</span> Repeating the trial</h2>
<p>Now we know how to do one simulated trial, we could just keep running the chunk above, and writing down the result each time. Once we had run the chunk 100 times, we would have 100 counts. Then we could look at the 100 counts to see how many were equal to 17 (all 17 simulated patients cured on that trial). At least that would be much faster than rolling 17 dice 100 times, but we would also like the computer to automate the process of repeating the trial, and keeping track of the counts.</p>
<p>Please forgive us as we race ahead again, as we did in the last chapter. As in the last chapter, we will use a <em>results</em> vector called <code>z</code> to store the count for each trial. As in the last chapter, we will use a <code>for</code> loop to repeat the trial procedure many times. As in the last chapter, we will not explain the counts vector of the <code>for</code> loop in any detail, because we are going to cover those in the next chapter.</p>
<p>Let us now imagine that we want to do 100 simulated trials at Saint Hypothetical General. This will give us 100 counts. We will want to store the count for each trial.</p>
<p>To do this, we make a vector called <code>z</code> to hold the 100 counts. We have called the vector <code>z</code>, but we could have called it anything we liked, such as <code>counts</code> or <code>results</code> or <code>cecilia</code>.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-66_7683b522b4cb6a4fa97b82f3e45a43eb">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A vector to hold the 100 count values.</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Later, we will fill this in with real count values from simulated trials.</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we use a <code>for</code> loop to <em>repeat the single trial procedure</em>.</p>
<p>Notice that the single trial procedure, inside this <code>for</code> loop, is the same as the single trial procedure above — the only two differences are:</p>
<ul>
<li>The trial procedure is inside the loop, and</li>
<li>We are storing the count for each trial as we go.</li>
</ul>
<p>We will go into more detail on how this works in the next chapter.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-68_d5d2613c9f52fe7be86af7ab46d772eb">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Procedure for 100 simulated trials.</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A vector to store the counts for each trial.</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">100</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat the trial procedure 100 times.</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) {</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get 17 values from the *some_integers* vector.</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store the 17 numbers with the name "a"</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> <span class="fu">sample</span>(some_integers, <span class="dv">17</span>, <span class="at">replace=</span><span class="cn">TRUE</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Is the value of "a" greater than 0?</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    q <span class="ot">&lt;-</span> a <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count the number of TRUE values in "q".</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">&lt;-</span> <span class="fu">sum</span>(q)</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store the result at the next position in the "z" vector.</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>    z[i] <span class="ot">=</span> b</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Now go back and do the next trial until finished.</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of all 100 trials.</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 14 15 12 17 13 17 16 16 14 16 16 15 17 14 17 13 16 15 16 15 13 14 17 17 15
 [26] 14 13 15 13 16 17 15 15 15 15 15 13 16 15 13 17 15 16 17 15 17 16 17 17 16
 [51] 12 17 16 12 16 15 15 13 16 16 16 13 16 14 15 15 15 15 14 15 14 11 15 13 14
 [76] 15 15 14 13 15 15 14 17 16 14 17 16 17 15 16 16 16 14 13 15 16 17 17 15 13</code></pre>
</div>
</div>
<p>Finally, we need to count how many of the trials results we stored in <code>z</code> gave a “cured” count of 17.</p>
<p>We can ask the question whether a single number is equal to 17 using the <em>double equals</em> comparison: <code>==</code>.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-70_44fe5f2fbc031a15d03230b02ed890b3">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="dv">17</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of s equal to 17?</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of the comparison.</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>s <span class="sc">==</span> <span class="dv">17</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">

</div>
</div>
<div class="callout-body-container callout-body">
<section id="single-and-double-equals" class="level2 Python" data-number="5.16">
<h2 data-number="5.16" class="anchored" data-anchor-id="single-and-double-equals"><span class="header-section-number">5.16</span> Single and double equals</h2>
<p>Notice that the <em>double equals</em> <code>==</code> means something entirely different to Python than the single equals <code>=</code>. In the code above, Python reads <code>s = 17</code> to mean “Set the variable <code>s</code> to have the value 17”. In technical terms the single equals is called an <em>assignment</em> operator, because it means <em>assign</em> the value 17 to the variable <code>s</code>.</p>
<p>The code <code>s == 17</code> has a completely different meaning.</p>
</section>
<section id="double-equals" class="level2 r" data-number="5.17">
<h2 data-number="5.17" class="anchored" data-anchor-id="double-equals"><span class="header-section-number">5.17</span> Double equals</h2>
<p>The <em>double equals</em> <code>==</code> above is a <em>comparison</em> in R.</p>
</section>
<p>It means “give <code>TRUE</code> if the value in <code>s</code> is equal to 17, and <code>FALSE</code> otherwise”. The <code>==</code> is a <em>comparison</em> operator — it is for comparing two values — here the value in <code>s</code> and the value 17. This comparison, like all comparisons, returns an answer that is either <code>TRUE</code> or <code>FALSE</code>. In our case <code>s</code> has the value 17, so the comparison becomes <code>17 == 17</code>, meaning “is 17 equal to 17?”, to which the answer is “Yes”, and R sends back <code>TRUE</code>.</p>
</div>
</div>
<p>We can ask this question of <em>all 100 counts</em> by asking the question: is the vector <code>z</code> equal to 17, like this:</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-72_91bda6976704a16cb7bfb6bf8e9c22ed">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Is the value of z equal to 17?</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>were_cured <span class="ot">&lt;-</span> z <span class="sc">==</span> <span class="dv">17</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of the comparison.</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>were_cured</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
 [13]  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE
 [49]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
 [85] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>Finally we use <code>sum</code> to count the number of <code>TRUE</code> values in the <code>were_cured</code> vector, to give the number of trials where all 17 patients were cured.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-74_688daa5aeb5b81bf7c892352b9c7afde">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of TRUE values in "were_cured"</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This is the same as the number of values in "z" that are equal to 17.</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>n_all_cured <span class="ot">&lt;-</span> <span class="fu">sum</span>(were_cured)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result of the comparison.</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>n_all_cured</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
</div>
<p><code>n_all_cured</code> is the number of simulated trials for which all patients were cured. It only remains to get the proportion of trials for which this was true, and to do this, we divide by the number of trials.</p>
<div class="cell" data-layout-align="center" data-hash="resampling_with_code_cache/html/unnamed-chunk-76_c385e9f8d3c10db5b01e343ab9d9241c">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proportion of trials where all patients were cured.</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> n_all_cured <span class="sc">/</span> <span class="dv">100</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the result</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.18</code></pre>
</div>
</div>
<p>From this experiment, we see that there is roughly a one-in-six chance that all 17 patients are cured when using a 90% effective treatment.</p>
</section>
<section id="what-have-we-learned-from-saint-hypothetical" class="level2" data-number="5.18">
<h2 data-number="5.18" class="anchored" data-anchor-id="what-have-we-learned-from-saint-hypothetical"><span class="header-section-number">5.18</span> What have we learned from Saint Hypothetical?</h2>
<p>We started with a question about the results of the NCI trial on the new drug. The question was — was the result of their trial — 17 out of 17 patients cured — surprising.</p>
<p>Then, for reasons we did not explain in detail, we changed tack, and asked the same question about a hypothetical set of 17 patients getting the <em>standard</em> treatment in Saint Hypothetical General.</p>
<p>That Hypothetical question turns out to be fairly easy to answer, because we can use simulation to estimate the chances that 17 out of 17 patients would be cured in such a hypothetical trial, on the assumption that each patient has a 90% chance of being cured with the standard treatment.</p>
<p>The answer for Saint Hypothetical General was — we would be somewhat surprised, but not astonished. We only get 17 out of 17 patients cured about one time in six.</p>
<p>Now let us return to the NCI trial. Should the trial authors be surprised by their results? If they assumed that their new treatment was <em>exactly as effective</em> as the standard treatment, the result of the trial is a bit unusual, just by chance. It is up to us to decide whether the result is unusual enough to make us think that the actual NCI treatment might in fact have been <em>more effective</em> than the standard treatment.</p>
<p>You will see this move again and again as we go through the book.</p>
<ul>
<li>We take something that really happened — in this case the 17 out of 17 patients cured.</li>
<li>Then we imagine a hypothetical world in which the results only depend on chance.</li>
<li>We do simulations in that hypothetical world to see how often we get a result like the one that happened in the real world.</li>
<li>If the real world result (17 out of 17) is an unusual, surprising result in the simulations from the hypothetical world, we take that as evidence that the real world result might not be due to chance alone.</li>
</ul>
<p>We have just described the main idea in statistical inference. If that all seems strange and backwards to you, do not worry, we will go over that idea many times in this book. It is not a simple idea to grasp in one go. We hope you will find that, as you do more simulations, and think of more hypothetical worlds, the idea will start to make more sense. Later, we will start to think about asking <em>other questions</em> about probability and chance in the real world.</p>
</section>
<section id="conclusions" class="level2" data-number="5.19">
<h2 data-number="5.19" class="anchored" data-anchor-id="conclusions"><span class="header-section-number">5.19</span> Conclusions</h2>
<p>Can you see how each of the operations that the computer carries out are analogous to the operations that you yourself executed when you solved this problem using 10-sided dice? This is exactly the procedure that we will use to solve every problem in probability and statistics that we must deal with. Either we will use a device such as coins or dice, or a random number table as an analogy for the physical process we are interested in (patients being cured, in this case), or we will simulate the analogy on the computer using the R program above.</p>
<p>The program above may not seem simple at first glance, but we think you will find, over the course of this book, that these programs become much simpler to understand than the older conventional approach to such problems that has routinely been taught to students for decades.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-dunleavy2006burkitt" class="csl-entry" role="listitem">
Dunleavy, Kieron, Stefania Pittaluga, John Janik, Nicole Grant, Margaret Shovlin, Richard Little, Robert Yarchoan, Seth Steinberg, Elaine S. Jaffe, and Wyndham H. Wilson. 2006. <span>“<span class="nocase">Novel Treatment of Burkitt Lymphoma with Dose-Adjusted EPOCH-Rituximab: Preliminary Results Showing Excellent Outcome.</span>”</span> <em>Blood</em> 108 (11): 2736–36. <a href="https://doi.org/10.1182/blood.V108.11.2736.2736">https://doi.org/10.1182/blood.V108.11.2736.2736</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./about_technology.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introducing R and the Jupyter notebook</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./resampling_with_code2.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">More resampling with code</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>